<!DOCTYPE html>
<!-- 09_25_01_JsonTwo.html -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JSON 2</title>
</head>
<body>

<h1> JSON 2 --> F12 를 눌러 확인</h1>

</body>

<script>

    const products = [
        {
            "id": "A001",
            "name": "프리미엄 텀블러",
            "price": 18000,
            "isInStock": true,
            "options": ["블랙", "실버", "화이트"]
        },
        {
            "id": "B002",
            "name": "무선 이어폰",
            "price": 99000,
            "isInStock": false,
            "options": []
        },
        {
            "id": "C003",
            "name": "스마트 워치",
            "price": 250000,
            "isInStock": true,
            "options": ["레드", "블루"]
        },
        {
            "id": "D004",
            "name": "AI 스피커",
            "price": 150000,
            "isInStock": true,
            "options": ["블랙", "그레이"]
        }
    ];

    console.log("\n--- 실무형 데이터 관리 시작 ---");

    // 1. 특정 조건의 데이터 찾기 (find)
    //    find(): 배열 안에서 특정 조건을 만족하는 첫 번째 요소를 찾아서 반환한다.
    //            마치 수많은 물건 중에 내가 찾는 첫 번째 물건을 골라내는 것과 같다.

    const findId = "C003";
    const smartWatch = products.find(product => product.id === findId);
    if (smartWatch) {
        console.log(`\nID가 ${findId}인 상품:`, smartWatch.name);
    } else {
        console.log(`\nID가 ${findId}인 상품을 찾을 수 없습니다.`);
    }

    // 2. 특정 조건의 데이터만 골라내기 (filter)
    //    filter(): 배열 안에서 특정 조건을 만족하는 모든 요소를 찾아서 새로운 배열로 반환한다.
    //              수많은 물건 중에 내가 원하는 조건을 가진 물건들을 모두 모아서 새로운 목록을 만드는 것과 같다.

    const inStockProducts = products.filter(product => product.isInStock === true);
    console.log("\n----- 재고가 있는 상품 목록 -----");
    inStockProducts.forEach(product => console.log(`- ${product.name}`));

    const expensiveProducts = products.filter(product => product.price >= 100000);
    console.log("\n----- 10만원 이상인 상품 목록 -----");
    expensiveProducts.forEach(product => console.log(`- ${product.name} (${product.price}원)`));


    // 3. 데이터의 특정 속성만 뽑아서 새로운 배열 만들기 (map)
    //    map(): 배열의 모든 요소에 대해 똑같은 작업을 수행한 후, 그 결과들을 모아 새로운 배열을 만든다.
    //           마치 모든 물건의 이름표만 따로 떼어 모아서 이름표 목록을 만드는 것과 같다.
    const productNames = products.map(product => product.name);
    console.log("\n----- 모든 상품 이름 목록 -----");
    console.log(productNames); // ["프리미엄 텀블러", "무선 이어폰", "스마트 워치", "AI 스피커"]

    const productPrices = products.map(product => product.price);
    console.log("\n----- 모든 상품 가격 목록 -----");
    console.log(productPrices); // [18000, 99000, 250000, 150000]

    // 4. 데이터 정렬하기 (sort)
    //    sort(): 배열의 요소들을 특정 기준에 따라 정렬한다. (원본 배열이 변경됨에 주의!)
    //            오름차순 (작은 값부터 큰 값으로) 또는 내림차순 (큰 값부터 작은 값으로)으로 정렬할 수 있다.
    //            가격이 저렴한 순서로 정렬해보자
    const sortedByPrice = [...products].sort((a, b) => a.price - b.price); // 원본 배열을 복사해서 정렬
    console.log("\n----- 가격이 저렴한 순서로 정렬된 상품 목록 -----");
    sortedByPrice.forEach(product => console.log(`- ${product.name} (${product.price}원)`));

    //    가격이 비싼 순서로 정렬해보자
    const sortedByPriceDesc = [...products].sort((a, b) => b.price - a.price); // 원본 배열을 복사해서 정렬
    console.log("\n----- 가격이 비싼 순서로 정렬된 상품 목록 -----");
    sortedByPriceDesc.forEach(product => console.log(`- ${product.name} (${product.price}원)`));

    // 5. 모든 데이터에 대한 합계 또는 계산 (reduce)
    //    reduce(): 배열의 모든 요소를 하나의 결과값으로 '줄여나가는' 역할을 한다.
    //              예를 들어, 모든 상품의 총 가격을 계산하거나, 모든 옵션을 하나의 리스트로 만들 때 사용한다. (쇼핑몰 등에서 많이 쓰임)
    const totalPrice = products.reduce((sum, product) => sum + product.price, 0);
    console.log(`\n모든 상품의 총 가격: ${totalPrice}원`);

    //    모든 상품의 옵션을 중복 없이 한 배열로 모으기
    const allOptions = products.reduce((acc, product) => {
        product.options.forEach(option => {
            if (!acc.includes(option)) { // 이미 추가된 옵션이 아니라면
                acc.push(option);
            }
        });
        return acc;
    }, []); // acc는 초기값으로 빈 배열 []을 가진다.
    console.log("\n----- 모든 상품의 고유 옵션 목록 -----");
    console.log(allOptions);

</script>
</html>